(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{581:function(e,t,n){e.exports={}},582:function(e,t,n){e.exports={}},652:function(e,t,n){"use strict";n(581)},653:function(e,t,n){"use strict";n(582)},706:function(e,t,n){"use strict";n.r(t);var o=n(6),r=(n(56),n(527)),l=n(38),c=n(112);l.a.registerPlugin(c.ScrollTrigger);var _={name:"HeaderSmall",components:{ImageBordered:r.a},props:{title:String,text:String,logo:Boolean,image:Object},mounted:function(){var e=this.$gsap;this.tl=new e.timeline({scrollTrigger:{trigger:".c-header-connexion"}}),this.tl.set(".a-stagger-element__header-small",{autoAlpha:0,y:30}),this.tl.staggerTo(".a-stagger-element__header-small",.6,{autoAlpha:1,y:0,ease:"Power1.easeOut"},.15,"=0.4")}},d=_,m=(n(652),n(7)),v=Object(m.a)(d,(function(){var e=this,t=e._self._c;return t("header",{staticClass:"c-header-connexion"},[t("div",{staticClass:"container p-r"},[t("div",{staticClass:"c-header-connexion__content"},[t("div",{staticClass:"row"},[t("div",{staticClass:"offset-lg-1 col-lg-12"},[t("h1",{staticClass:"c-header-connexion__title a-stagger-element__header-small"},[e._v("\n                        "+e._s(e.title)+"\n                    ")]),e._v(" "),t("div",{staticClass:"c-header-connexion__text a-stagger-element__header-small"},[e._v("\n                        "+e._s(e.text)+"\n                    ")])]),e._v(" "),e.image?t("div",{staticClass:"c-header-connexion__image offset-lg-2 col-lg-8"},[t("ImageBordered",{attrs:{url:e.image.url,alt:e.image.alt,class_string:"--right"}})],1):e._e()])])]),e._v(" "),t("div",{staticClass:"a-stagger-element__header-small"},[t("svg",{staticClass:"c-header-connexion__logo",attrs:{width:"339",height:"513",viewBox:"0 0 339 513",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M248.905 462.043C247.207 460.345 245.972 458.129 245.448 455.642L212.046 293.974L63.9571 273.497C58.3823 272.72 54.0013 268.393 53.1688 262.818C52.3364 257.243 55.2743 251.841 60.3776 249.53L195.709 187.802L119.178 111.924L119.15 111.897C115.262 108.009 114.32 102.106 116.822 97.194C119.351 92.3098 124.727 89.6176 130.138 90.559L336.041 126.167C341.507 127.108 345.697 131.516 346.447 137.009C347.17 142.475 344.259 147.795 339.238 150.078L239.383 195.607L319.94 275.455L363.143 174.365C365.317 169.234 370.637 166.16 376.184 166.855C381.732 167.497 386.194 171.741 387.163 177.235L423.094 380.953C424.035 386.364 421.398 391.74 416.541 394.297C411.656 396.826 405.726 395.911 401.811 392.05L328.62 319.513L269.412 458.129C267.265 463.178 262.055 466.253 256.562 465.666C253.584 465.359 250.931 464.014 248.932 462.015M231.532 273.775C233.257 275.5 234.464 277.689 234.989 280.176L262.037 411.123L309.37 300.318L214.986 206.751L110.492 254.4L224.339 270.125C227.126 270.514 229.67 271.804 231.586 273.721M291.661 143.985L165.425 122.139L220.298 176.521L291.689 143.958L291.661 143.985ZM369.785 223.254L339.353 294.541L391.487 346.185L369.813 223.227L369.785 223.254Z",fill:"white"}})])])])}),[],!1,null,"18fb30d6",null).exports,h=(n(49),n(22),n(10),n(37),n(39),n(110)),x=n.n(h),f=n(64),C={name:"theFormConnexion",data:function(){return{login:{username:"",password:""},login_type:"c"==this.$route.query.type?"company":"talent",formErrors:!1,formErrorsMessage:"",isLogout:!1,isUpdated:!1,isErrorLogin:!1}},head:function(){return{title:"Connexion",meta:[{hid:"description",name:"description",content:"Ma description personnalis√©e"}]}},beforeCreate:function(){var e=this.$auth.$storage.getUniversal("user");e&&this.$auth.setUser(e),this.$auth.user},methods:{userLogin:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("efzegz2"),t.prev=1,"talent"!=e.login_type){t.next=8;break}return t.next=5,e.$auth.loginWith("local_talent",{data:e.login});case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,e.$auth.loginWith("local_company",{data:e.login});case 10:t.t0=t.sent;case 11:if(n=t.t0,o=n.data.token,e.$auth.strategy.token.set(o),x.a.defaults.headers.common={Authorization:"Bearer ".concat(o)},"talent"!=e.login_type){t.next=21;break}return t.next=18,x.a.get(e.$auth.strategies.local_talent.options.endpoints.user.url);case 18:t.t1=t.sent,t.next=24;break;case 21:return t.next=23,x.a.get(e.$auth.strategies.local_company.options.endpoints.user.url);case 23:t.t1=t.sent;case 24:n=t.t1,(r=n.data).token=o,e.$auth.setUser(r),e.$auth.$storage.setUniversal("user",r,!0),e.$router.push("".concat(e.currentLang,"/profile/").concat(e.login_type,"/").concat(r.id)),t.next=36;break;case 32:t.prev=32,t.t2=t.catch(1),console.log("Login error:",t.t2),e.isErrorLogin=!0;case 36:case"end":return t.stop()}}),t,null,[[1,32]])})))()},openPopup:function(){f.a.$emit("open-popup",!0)}},computed:{currentLang:function(){return"en"==this.$i18n.locale?"/"+this.$i18n.locale:""}}},L=(n(653),Object(m.a)(C,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"c-formconnexion"},[t("div",{staticClass:"container"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.userLogin.apply(null,arguments)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"offset-lg-1 col-lg-9"},[t("label",[e._v(e._s(e.$t("pageconnexion.label_type"))+" "),t("span",[e._v("*")])]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.login_type,expression:"login_type"}],attrs:{type:"text",name:e.$t("pageconnexion.id_type"),required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.login_type=t.target.multiple?n:n[0]}}},e._l(e.$t("pageconnexion.option_type"),(function(element,n){return t("option",{key:n,domProps:{value:element.value}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(element.name)+"\n\t\t\t\t\t\t\t")])})),0),e._v(" "),t("label",[e._v(e._s(e.$t("pageconnexion.label_mail"))+" "),t("span",[e._v("*")])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.login.username,expression:"login.username"}],class:{active:e.isErrorLogin},attrs:{type:"text",name:e.$t("pageconnexion.id_mail"),placeholder:"",required:""},domProps:{value:e.login.username},on:{input:function(t){t.target.composing||e.$set(e.login,"username",t.target.value)}}}),e._v(" "),t("label",[e._v(e._s(e.$t("pageconnexion.label_password"))+" "),t("span",[e._v("*")])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.login.password,expression:"login.password"}],class:{active:e.isErrorLogin},attrs:{type:"password",name:e.$t("pageconnexion.id_password"),placeholder:"",required:""},domProps:{value:e.login.password},on:{input:function(t){t.target.composing||e.$set(e.login,"password",t.target.value)}}}),e._v(" "),t("div",[t("nuxt-link",{staticClass:"c-formconnexion__link",attrs:{to:"/forgotten-password"}},[e._v(e._s(e.$t("pageconnexion.label_forgottenpassword")))])],1),e._v(" "),t("div",{staticClass:"c-formconnexion__error",class:{active:e.isErrorLogin}},[e._v(e._s(e.$t("pageconnexion.badlogin")))]),e._v(" "),t("button",{staticClass:"c-formconnexion__submit --bordered",attrs:{type:"submit"}},[t("span",{staticClass:"c-formconnexion__submit__text"},[e._v(e._s(e.$t("pageconnexion.label_submit")))])]),e._v(" "),t("div",{staticClass:"c-formconnexion__mandatory-text"},[e._v(e._s(e.$t("pageconnexion.mandatory")))]),e._v(" "),t("div",{staticClass:"c-formconnexion__register",on:{click:function(t){return e.openPopup()}}},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.$t("pageconnexion.noaccount_intro"))+" "),t("span",[e._v(e._s(e.$t("pageconnexion.noaccount_span")))])])])])])])])}),[],!1,null,"3a696bae",null)),$={name:"contactPage",components:{TheHeaderConnexion:v,TheFormConnexion:L.exports},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.app,e.params,e.$axios,e.$config.baseURL,console.log("this.$i18n.locale ",n),o={seo:{title:"string",description:"string"},blockHeader:{text:"",image:{url:"https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg",alt:""}}},t.abrupt("return",{connexionData:o});case 4:case"end":return t.stop()}}),t)})))()}},w=Object(m.a)($,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"layout-contact"},["fr"==this.$i18n.locale?t("TheHeaderConnexion",{attrs:{title:"Se connecter",text:"",image:e.connexionData.blockHeader.image,logo:!0}}):t("TheHeaderConnexion",{attrs:{title:"Login",text:"",image:e.connexionData.blockHeader.image,logo:!0}}),e._v(" "),t("TheFormConnexion")],1)}),[],!1,null,null,null);t.default=w.exports}}]);